from bs4 import BeautifulSoup

with open("../materials/evilcorp.html") as fp:
    soup = BeautifulSoup(fp, "html.parser")

# change <title>
title = soup.title
title_str = title.string
title_str.replace_with("Evil Corp - Stealing your money every day")

# add <h1>
pronoun = soup.span.contents[0].string
user_name = soup.span.contents[1]
new_tag = soup.new_tag("h1")
soup.body.append(new_tag)
soup.h1.append(pronoun + user_name + ", you are hacked!")

# add script
script_tag = soup.new_tag("script")
soup.body.append(script_tag)
soup.script.append(open("script.txt").read())

# change ref
soup.a.string.replace_with("Fsociety")
soup.a['href'] = "https://mrrobot.fandom.com/wiki/Fsociety"

# save new html file
with open("evilcorp_hacked.html", "w") as nf:
    nf.write(str(soup))
